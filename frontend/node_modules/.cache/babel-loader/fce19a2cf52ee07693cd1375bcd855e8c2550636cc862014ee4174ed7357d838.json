{"ast":null,"code":"import { redirect } from \"react-router-dom\";\nexport function getDurationToken() {\n  const storedExpirationDate = localStorage.getItem(\"expirationDate\");\n  const expirationDate = new Date(storedExpirationDate);\n  const now = new Date().toLocaleString(\"en-US\", {\n    timeZone: \"America/New_York\"\n  });\n  console.log(now);\n  const duration = expirationDate.getTime() - now.getTime();\n  return duration;\n}\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    return null;\n  }\n  const tokenDuration = getDurationToken();\n  if (tokenDuration < 0) {\n    return \"EXPIRED\";\n  }\n  return token;\n}\nexport function tokenLoader() {\n  return getToken();\n}\nexport function checkAuthLoader() {\n  const token = getToken();\n  if (!token) {\n    return redirect(\"/auth\");\n  }\n  return null;\n}","map":{"version":3,"names":["redirect","getDurationToken","storedExpirationDate","localStorage","getItem","expirationDate","Date","now","toLocaleString","timeZone","console","log","duration","getTime","getToken","token","tokenDuration","tokenLoader","checkAuthLoader"],"sources":["/Volumes/WorkSpace/React_Course/authentication/frontend/src/util/auth.js"],"sourcesContent":["import { redirect } from \"react-router-dom\";\n\nexport function getDurationToken() {\n\tconst storedExpirationDate = localStorage.getItem(\"expirationDate\");\n\tconst expirationDate = new Date(storedExpirationDate);\n\tconst now = new Date().toLocaleString(\"en-US\", {\n\t\ttimeZone: \"America/New_York\",\n\t});\n\tconsole.log(now);\n\tconst duration = expirationDate.getTime() - now.getTime();\n\treturn duration;\n}\n\nexport function getToken() {\n\tconst token = localStorage.getItem(\"token\");\n\n\tif (!token) {\n\t\treturn null;\n\t}\n\n\tconst tokenDuration = getDurationToken();\n\n\tif (tokenDuration < 0) {\n\t\treturn \"EXPIRED\";\n\t}\n\n\treturn token;\n}\n\nexport function tokenLoader() {\n\treturn getToken();\n}\n\nexport function checkAuthLoader() {\n\tconst token = getToken();\n\tif (!token) {\n\t\treturn redirect(\"/auth\");\n\t}\n\treturn null;\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAE3C,OAAO,SAASC,gBAAgBA,CAAA,EAAG;EAClC,MAAMC,oBAAoB,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;EACnE,MAAMC,cAAc,GAAG,IAAIC,IAAI,CAACJ,oBAAoB,CAAC;EACrD,MAAMK,GAAG,GAAG,IAAID,IAAI,CAAC,CAAC,CAACE,cAAc,CAAC,OAAO,EAAE;IAC9CC,QAAQ,EAAE;EACX,CAAC,CAAC;EACFC,OAAO,CAACC,GAAG,CAACJ,GAAG,CAAC;EAChB,MAAMK,QAAQ,GAAGP,cAAc,CAACQ,OAAO,CAAC,CAAC,GAAGN,GAAG,CAACM,OAAO,CAAC,CAAC;EACzD,OAAOD,QAAQ;AAChB;AAEA,OAAO,SAASE,QAAQA,CAAA,EAAG;EAC1B,MAAMC,KAAK,GAAGZ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAACW,KAAK,EAAE;IACX,OAAO,IAAI;EACZ;EAEA,MAAMC,aAAa,GAAGf,gBAAgB,CAAC,CAAC;EAExC,IAAIe,aAAa,GAAG,CAAC,EAAE;IACtB,OAAO,SAAS;EACjB;EAEA,OAAOD,KAAK;AACb;AAEA,OAAO,SAASE,WAAWA,CAAA,EAAG;EAC7B,OAAOH,QAAQ,CAAC,CAAC;AAClB;AAEA,OAAO,SAASI,eAAeA,CAAA,EAAG;EACjC,MAAMH,KAAK,GAAGD,QAAQ,CAAC,CAAC;EACxB,IAAI,CAACC,KAAK,EAAE;IACX,OAAOf,QAAQ,CAAC,OAAO,CAAC;EACzB;EACA,OAAO,IAAI;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}